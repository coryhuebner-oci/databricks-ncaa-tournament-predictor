# This is a Databricks asset bundle definition for databricks-ncaa-tournament-predictor.
# The Databricks extension requires databricks.yml configuration file.
# See https://docs.databricks.com/dev-tools/bundles/index.html for documentation.

bundle:
  name: databricks-ncaa-tournament-predictor

artifacts:
  ncaa_tournament_predictor_wheel:
    type: whl
    # TODO - figure out how to make this dynamic
    path: "."
    build: python -m build --wheel

resources:
  pipelines:
    kaggle_stats_pipeline:
      name: "Kaggle Men's NCAA stats pipeline"
      catalog: "object_computing"
      schema: ncaa_mens_basketball
      continuous: false
      development: true
      edition: "advanced"
      clusters:
        - label: "default"
          num_workers: 1
      libraries:
        - notebook:
            path: "./notebooks/kaggle_stats_pipeline.ipynb"
      channel: "CURRENT"

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://dbc-7be6322b-fcce.cloud.databricks.com

  prod:
    mode: production
    workspace:
      host: https://dbc-7be6322b-fcce.cloud.databricks.com
    permissions:
      - user_name: huebnerc@objectcomputing.com
        level: CAN_MANAGE
